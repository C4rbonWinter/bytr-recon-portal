(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},40774:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c}),a(35480),a(15495),a(35866);var r=a(23191),l=a(88716),s=a(37922),n=a.n(s),i=a(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,35480)),"/Users/rickbot/.openclaw/workspace/recon-portal/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15495)),"/Users/rickbot/.openclaw/workspace/recon-portal/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/rickbot/.openclaw/workspace/recon-portal/src/app/page.tsx"],x="/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},85564:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},22728:(e,t,a)=>{Promise.resolve().then(a.bind(a,43962))},25637:(e,t,a)=>{Promise.resolve().then(a.bind(a,54497))},54497:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(10326),l=a(17577),s=a(77109),n=a(42718);function i(e){return{id:e.id,patientName:e.patient_name,clinic:e.clinic,salesperson:e.salesperson,sharedWith:e.shared_with||null,dealType:e.deal_type,planTotal:e.plan_total,collected:e.collected||0,verified:"verified"===e.status,status:e.status,dealMonth:e.deal_month,notes:e.notes||"",invoiceLink:e.invoice_link||"",payments:(e.payments||[]).map(e=>({id:e.id,amount:e.amount,method:e.method,date:e.payment_date,verified:e.verified}))}}let d={TR01:"SG",TR02:"IRV",TR04:"LV"},c={verified:"✅",partial:"⚠️",unpaid:"\uD83D\uDD34",flagged:"\uD83D\uDEA9"};function o(){let{data:e}=(0,s.useSession)(),[t,a]=(0,l.useState)([]),[o,m]=(0,l.useState)(!0),[u,p]=(0,l.useState)("all"),[g,b]=(0,l.useState)("all"),[v,j]=(0,l.useState)("all"),[y,k]=(0,l.useState)(""),[f,N]=(0,l.useState)(!1),[z,w]=(0,l.useState)(null),C={name:e?.user?.name||"Cole",role:e?.user?.role||"admin"},S="salesperson"===C.role,D=async()=>{try{let e=await fetch("/api/deals"),t=await e.json();t.deals&&a(t.deals.map(i))}catch(e){console.error("Failed to fetch deals:",e)}finally{m(!1)}},T=async(e,a)=>{try{(await fetch("/api/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dealId:e,amount:a.amount,method:a.method,paymentDate:a.date,source:"manual"})})).ok&&(await D(),w(a=>a&&a.id===e&&t.find(t=>t.id===e)||a))}catch(e){console.error("Failed to add payment:",e)}},P=async(e,t)=>{if(confirm("Delete this payment?"))try{(await fetch(`/api/payments?id=${t}`,{method:"DELETE"})).ok&&(await D(),w(a=>a&&a.id===e?{...a,payments:a.payments.filter(e=>e.id!==t)}:a))}catch(e){console.error("Failed to delete payment:",e)}},L=async e=>{try{(await fetch("/api/deals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(await D(),N(!1))}catch(e){console.error("Failed to create deal:",e)}},R=async(e,t)=>{try{(await fetch("/api/deals",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...t})})).ok&&(await D(),w(a=>a&&a.id===e?{...a,...void 0!==t.sharedWith&&{sharedWith:t.sharedWith},...t.salesperson&&{salesperson:t.salesperson}}:a))}catch(e){console.error("Failed to update deal:",e)}},_=S?t.filter(e=>e.salesperson===C.name||e.sharedWith===C.name):t,A=_.reduce((e,t)=>e+t.planTotal,0),F=_.reduce((e,t)=>e+t.collected,0),O=_.filter(e=>"flagged"===e.status||"partial"===e.status).length,W=Array.from(new Set(_.map(e=>e.dealMonth))).sort().reverse(),q=_.filter(e=>("all"===u||e.clinic===u)&&("all"===g||e.status===g)&&("all"===v||e.dealMonth===v)&&(!y||!!e.patientName.toLowerCase().includes(y.toLowerCase()))),M=e=>{let t=e%1!=0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t?2:0,maximumFractionDigits:2}).format(e)};return o?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-900 flex items-center justify-center",children:r.jsx("div",{className:"text-gray-500 dark:text-zinc-400",children:"Loading deals..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-zinc-900",children:[r.jsx("header",{className:"bg-white dark:bg-zinc-800 shadow-sm border-b dark:border-zinc-700",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-zinc-100",children:"T+R Recon Portal"}),(0,r.jsxs)("nav",{className:"flex gap-4",children:[r.jsx("a",{href:"/",className:"text-blue-600 dark:text-blue-400 font-medium",children:"Deals"}),r.jsx("a",{href:"/pipeline",className:"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-zinc-100",children:"Pipeline"})]}),S&&r.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"My Deals"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(n.T,{}),r.jsx("button",{onClick:()=>N(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"+ New Deal"}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("span",{className:"text-gray-600 dark:text-zinc-300 cursor-pointer py-2",children:[C.name," ▼"]}),r.jsx("div",{className:"absolute right-0 top-full pt-1 w-48 hidden group-hover:block z-20",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-lg border dark:border-zinc-700",children:[r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-zinc-400 border-b dark:border-zinc-700",children:e?.user?.email}),r.jsx("button",{onClick:()=>(0,s.signOut)({callbackUrl:"/login"}),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-b-lg",children:"Sign out"})]})})]})]})]})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-4 rounded-lg shadow-sm border dark:border-zinc-700",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-zinc-100",children:M(A)}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Total Planned"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-4 rounded-lg shadow-sm border dark:border-zinc-700",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:M(F)}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Verified Collected"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-4 rounded-lg shadow-sm border dark:border-zinc-700",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-500 dark:text-orange-400",children:M(A-F)}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Pending Balance"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-4 rounded-lg shadow-sm border dark:border-zinc-700",children:[r.jsx("div",{className:"text-2xl font-bold text-red-500 dark:text-red-400",children:O}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Need Attention"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",value:y,onChange:e=>k(e.target.value),placeholder:"Search patient...",className:"border dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 dark:text-zinc-100 w-48"}),(0,r.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"border dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 dark:text-zinc-100",children:[r.jsx("option",{value:"all",children:"All Months"}),W.map(e=>{let t=e;if(e.includes("-")){let[a,r]=e.split("-");t=new Date(Number(a),Number(r)-1).toLocaleString("default",{month:"long",year:"numeric"})}return r.jsx("option",{value:e,children:t},e)})]}),(0,r.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"border dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 dark:text-zinc-100",children:[r.jsx("option",{value:"all",children:"All Clinics"}),r.jsx("option",{value:"TR01",children:"TR01 (SG)"}),r.jsx("option",{value:"TR02",children:"TR02 (IRV)"}),r.jsx("option",{value:"TR04",children:"TR04 (LV)"})]}),(0,r.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"border dark:border-zinc-700 rounded-lg px-3 py-2 bg-white dark:bg-zinc-800 dark:text-zinc-100",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"verified",children:"✅ Verified"}),r.jsx("option",{value:"partial",children:"⚠️ Partial"}),r.jsx("option",{value:"unpaid",children:"\uD83D\uDD34 Unpaid"}),r.jsx("option",{value:"flagged",children:"\uD83D\uDEA9 Flagged"})]})]}),r.jsx("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-sm border dark:border-zinc-700 overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-zinc-900 border-b dark:border-zinc-700",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Patient"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Clinic"}),!S&&r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Salesperson"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Plan Total"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Collected"}),r.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Balance"}),r.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-zinc-700",children:q.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-700 cursor-pointer",onClick:()=>w(e),children:[(0,r.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-zinc-100",children:[e.patientName,e.sharedWith&&r.jsx("span",{className:"ml-2 cursor-help",title:`Shared with ${e.sharedWith===C.name?e.salesperson:e.sharedWith}`,children:"\uD83E\uDD1D"})]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-gray-600 dark:text-zinc-300",children:[e.clinic," (",d[e.clinic],")"]}),!S&&r.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-zinc-300",children:e.salesperson}),(0,r.jsxs)("td",{className:"px-4 py-3 text-left text-gray-900 dark:text-zinc-100",children:[M(e.planTotal),e.invoiceLink&&r.jsx("a",{href:e.invoiceLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"ml-1 hover:opacity-70",title:"View invoice",children:"\uD83D\uDCCB"})]}),r.jsx("td",{className:"px-4 py-3 text-left text-green-600 dark:text-green-400 cursor-help",title:e.payments.length>0?e.payments.map(e=>`${e.method}: ${M(e.amount)}${e.verified?"":" (pending)"}`).join("\n"):"",children:M(e.collected)}),r.jsx("td",{className:"px-4 py-3 text-left text-orange-500 dark:text-orange-400",children:M(e.planTotal-e.collected)}),r.jsx("td",{className:"px-4 py-3 text-center text-xl",children:c[e.status]})]},e.id))})]})})]}),f&&r.jsx(x,{onClose:()=>N(!1),currentUser:C,onCreate:L}),z&&r.jsx(h,{deal:z,onClose:()=>w(null),onAddPayment:e=>T(z.id,e),onDeletePayment:e=>P(z.id,e),onUpdateDeal:R,isSalesperson:S})]})}function x({onClose:e,currentUser:t,onCreate:a}){let s="salesperson"===t.role,[n,i]=(0,l.useState)({patientName:"",clinic:"",salesperson:s?t.name:"",sharedWith:"",dealType:"",planTotal:"",invoiceLink:"",notes:""}),[d,c]=(0,l.useState)([]),[o,x]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),u=async e=>{if(e.length<2||!n.clinic){c([]);return}x(!0);try{let t=await fetch(`/api/ghl/search?q=${encodeURIComponent(e)}&clinic=${n.clinic}`),a=await t.json();c(a.results||[]),m(!0)}catch(e){console.error("Search error:",e),c([])}finally{x(!1)}},p=e=>{i({...n,patientName:e});let t=setTimeout(()=>u(e),300);return()=>clearTimeout(t)},g=e=>{i({...n,patientName:e.name,clinic:e.clinic,invoiceLink:e.invoiceLink||""}),m(!1),c([])},b=async e=>{e.preventDefault(),await a({patientName:n.patientName,clinic:n.clinic,salesperson:n.salesperson,sharedWith:n.sharedWith||null,dealType:n.dealType,planTotal:n.planTotal,invoiceLink:n.invoiceLink,notes:n.notes,dealMonth:new Date().toISOString().slice(0,7)})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b dark:border-zinc-700",children:[r.jsx("h2",{className:"text-lg font-semibold dark:text-zinc-100",children:"New Deal"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Clinic"}),(0,r.jsxs)("select",{value:n.clinic,onChange:e=>{i({...n,clinic:e.target.value,patientName:""}),c([])},className:"w-full border dark:border-zinc-600 rounded-lg px-3 py-2 dark:bg-zinc-700 dark:text-zinc-100",required:!0,children:[r.jsx("option",{value:"",children:"Select clinic first..."}),r.jsx("option",{value:"TR01",children:"TR01 (SG)"}),r.jsx("option",{value:"TR02",children:"TR02 (IRV)"}),r.jsx("option",{value:"TR04",children:"TR04 (LV)"})]})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Patient Name"}),r.jsx("input",{type:"text",value:n.patientName,onChange:e=>p(e.target.value),onFocus:()=>d.length>0&&m(!0),className:"w-full border dark:border-zinc-600 rounded-lg px-3 py-2 dark:bg-zinc-700 dark:text-zinc-100",placeholder:n.clinic?"Start typing...":"Select clinic first",disabled:!n.clinic,required:!0}),o&&r.jsx("span",{className:"absolute right-3 top-9 text-gray-400 dark:text-zinc-500 text-sm",children:"Searching..."}),h&&d.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-zinc-700 border dark:border-zinc-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:d.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>g(e),className:"w-full text-left px-3 py-2 hover:bg-blue-50 dark:hover:bg-zinc-600 border-b dark:border-zinc-600 last:border-b-0 dark:text-zinc-100",children:[r.jsx("div",{className:"font-medium",children:e.name}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:e.invoiceLink&&"\uD83D\uDCCB Has invoice"})]},e.id))}),h&&0===d.length&&n.patientName.length>=2&&!o&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-zinc-700 border dark:border-zinc-600 rounded-lg shadow-lg p-3 text-sm text-gray-500 dark:text-zinc-400",children:"No patients found in GHL. You can still create a new deal."}),n.invoiceLink&&r.jsx("div",{className:"mt-1 text-xs text-green-600",children:"Invoice linked from GHL"})]}),!s&&r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salesperson"}),(0,r.jsxs)("select",{value:n.salesperson,onChange:e=>i({...n,salesperson:e.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[r.jsx("option",{value:"",children:"Select salesperson..."}),r.jsx("option",{value:"Chris",children:"Chris"}),r.jsx("option",{value:"Josh",children:"Josh"}),r.jsx("option",{value:"Molly",children:"Molly"}),r.jsx("option",{value:"Scot",children:"Scot"}),r.jsx("option",{value:"Jake",children:"Jake"}),r.jsx("option",{value:"Blake",children:"Blake"})]})]})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deal Type"}),(0,r.jsxs)("select",{value:n.dealType,onChange:e=>i({...n,dealType:e.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[r.jsx("option",{value:"",children:"Select type..."}),r.jsx("option",{value:"Double O",children:"Double O (Double Onyx)"}),r.jsx("option",{value:"Double Z",children:"Double Z (Double Zirconia)"}),r.jsx("option",{value:"Single L",children:"Single L"}),r.jsx("option",{value:"Onyx",children:"Onyx"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Treatment Plan Total"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),r.jsx("input",{type:"number",value:n.planTotal,onChange:e=>i({...n,planTotal:e.target.value}),className:"w-full border rounded-lg px-3 py-2 pl-7",placeholder:"0",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),r.jsx("textarea",{value:n.notes,onChange:e=>i({...n,notes:e.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:2,placeholder:"Any additional notes..."})]}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Deal"})})]})]})})}function h({deal:e,onClose:t,onAddPayment:a,onDeletePayment:s,onUpdateDeal:n,isSalesperson:i}){let[c,o]=(0,l.useState)(!1),[x,h]=(0,l.useState)(e.sharedWith||""),[m,u]=(0,l.useState)(e.salesperson),[p,g]=(0,l.useState)({amount:"",method:"",date:new Date().toISOString().split("T")[0]}),b=x!==(e.sharedWith||"")||m!==e.salesperson,v=async()=>{if(b){let t={};x!==(e.sharedWith||"")&&(t.sharedWith=x||null),m!==e.salesperson&&(t.salesperson=m),await n(e.id,t)}t()},j=e=>{let t=e%1!=0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:t?2:0,maximumFractionDigits:2}).format(e)},y=e.planTotal-e.collected;return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b dark:border-zinc-700",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold dark:text-zinc-100",children:e.patientName}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:[e.dealType," • ",e.clinic," (",d[e.clinic],")",!i&&` • ${e.salesperson}`]})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300",children:"✕"})]}),(0,r.jsxs)("div",{className:"p-4 overflow-y-auto flex-1",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold dark:text-zinc-100",children:[j(e.planTotal),e.invoiceLink&&r.jsx("a",{href:e.invoiceLink,target:"_blank",rel:"noopener noreferrer",className:"ml-1 hover:opacity-70",title:"View invoice",children:"\uD83D\uDCCB"})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Plan Total"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:j(e.collected)}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Collected"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/30 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-orange-500 dark:text-orange-400",children:j(y)}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Balance"})]})]}),e.notes&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-700 dark:text-zinc-300",children:e.notes})}),!i&&r.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Salesperson:"}),(0,r.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"border dark:border-zinc-600 rounded px-2 py-1 text-sm dark:bg-zinc-600 dark:text-zinc-100",children:[r.jsx("option",{value:"Chris",children:"Chris"}),r.jsx("option",{value:"Josh",children:"Josh"}),r.jsx("option",{value:"Molly",children:"Molly"}),r.jsx("option",{value:"Scot",children:"Scot"}),r.jsx("option",{value:"Jake",children:"Jake"}),r.jsx("option",{value:"Blake",children:"Blake"}),r.jsx("option",{value:"TBD",children:"TBD"})]})]})}),r.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Shared With:"}),(0,r.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"border dark:border-zinc-600 rounded px-2 py-1 text-sm dark:bg-zinc-600 dark:text-zinc-100",children:[r.jsx("option",{value:"",children:"None"}),r.jsx("option",{value:"Chris",children:"Chris"}),r.jsx("option",{value:"Josh",children:"Josh"}),r.jsx("option",{value:"Molly",children:"Molly"}),r.jsx("option",{value:"Scot",children:"Scot"}),r.jsx("option",{value:"Jake",children:"Jake"}),r.jsx("option",{value:"Blake",children:"Blake"})]})]})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"font-medium dark:text-zinc-100",children:"Payments"}),r.jsx("button",{onClick:()=>o(!0),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"+ Add Payment"})]}),0===e.payments.length?r.jsx("p",{className:"text-gray-400 dark:text-zinc-500 text-sm italic",children:"No payments recorded"}):r.jsx("div",{className:"space-y-2",children:e.payments.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium dark:text-zinc-100",children:j(e.amount)}),r.jsx("span",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-2",children:e.method}),"Cash"===e.method&&!e.verified&&r.jsx("span",{className:"ml-2 text-xs bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400 px-2 py-0.5 rounded",children:"Pending Verification"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[e.date,e.verified&&r.jsx("span",{children:"✅"}),!i&&r.jsx("button",{onClick:()=>s(e.id),className:"text-red-400 hover:text-red-600 ml-2",title:"Delete payment",children:"✕"})]})]},e.id))})]}),c&&(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.method&&(a({amount:Number(p.amount),method:p.method,date:p.date}),g({amount:"",method:"",date:new Date().toISOString().split("T")[0]}),o(!1))},className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm dark:text-zinc-100",children:"Add Payment"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-2 top-2 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),r.jsx("input",{type:"number",value:p.amount,onChange:e=>g({...p,amount:e.target.value}),className:"w-full border dark:border-zinc-600 rounded px-2 py-1.5 pl-5 text-sm dark:bg-zinc-700 dark:text-zinc-100",placeholder:"0",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-zinc-400 mb-1",children:"Date"}),r.jsx("input",{type:"date",value:p.date,onChange:e=>g({...p,date:e.target.value}),className:"w-full border dark:border-zinc-600 rounded px-2 py-1.5 text-sm dark:bg-zinc-700 dark:text-zinc-100",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs text-gray-600 dark:text-zinc-400 mb-1",children:"Method"}),(0,r.jsxs)("select",{value:p.method,onChange:e=>g({...p,method:e.target.value}),className:"w-full border dark:border-zinc-600 rounded px-2 py-1.5 text-sm dark:bg-zinc-700 dark:text-zinc-100",required:!0,children:[r.jsx("option",{value:"",children:"Select method..."}),(0,r.jsxs)("optgroup",{label:"Financing",children:[r.jsx("option",{value:"Cherry",children:"Cherry"}),r.jsx("option",{value:"CareCredit",children:"CareCredit"}),r.jsx("option",{value:"Proceed",children:"Proceed"}),r.jsx("option",{value:"Patient Preferred",children:"Patient Preferred"}),r.jsx("option",{value:"Alphaeon",children:"Alphaeon"}),r.jsx("option",{value:"Sunbit",children:"Sunbit"}),r.jsx("option",{value:"HFD",children:"HFD"}),r.jsx("option",{value:"LendingClub",children:"LendingClub"})]}),(0,r.jsxs)("optgroup",{label:"Direct Payment",children:[r.jsx("option",{value:"Credit Card",children:"Credit Card"}),r.jsx("option",{value:"Cash",children:"Cash"}),r.jsx("option",{value:"Check",children:"Check"}),r.jsx("option",{value:"ACH/Wire",children:"ACH/Wire"})]}),r.jsx("optgroup",{label:"Other",children:r.jsx("option",{value:"Insurance",children:"Insurance"})})]})]}),"Cash"===p.method&&r.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/50 p-2 rounded",children:"⚠️ Cash payments require admin verification"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-3 py-1.5 border dark:border-zinc-600 rounded text-sm hover:bg-gray-50 dark:hover:bg-zinc-600 dark:text-zinc-100",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add Payment"})]})]})]}),r.jsx("div",{className:"p-4 border-t dark:border-zinc-700",children:r.jsx("button",{onClick:v,className:`w-full px-4 py-2 rounded-lg ${b?"bg-blue-600 text-white hover:bg-blue-700":"border dark:border-zinc-600 hover:bg-gray-50 dark:hover:bg-zinc-700 dark:text-zinc-100"}`,children:b?"Save":"Close"})})]})})}},43962:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>i});var r=a(10326),l=a(77109);a(17577);var s=a(14831);function n({children:e,...t}){return r.jsx(s.f,{...t,children:e})}function i({children:e}){return r.jsx(n,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:r.jsx(l.SessionProvider,{children:e})})}},42718:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var r=a(10326),l=a(14831),s=a(17577);function n(){let{theme:e,setTheme:t}=(0,l.F)(),[a,n]=(0,s.useState)(!1);return a?r.jsx("button",{onClick:()=>t("dark"===e?"light":"dark"),className:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:"dark"===e?"Switch to light mode":"Switch to dark mode",children:"dark"===e?"☀️":"\uD83C\uDF19"}):null}},15495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>i});var r=a(19510),l=a(45317),s=a.n(l);a(5023);let n=(0,a(68570).createProxy)(String.raw`/Users/rickbot/.openclaw/workspace/recon-portal/src/app/providers.tsx#Providers`),i={title:"T+R Reconciliation Portal",description:"Deal entry and payment verification for Teeth+Robots"};function d({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:r.jsx("body",{className:s().className,children:r.jsx(n,{children:e})})})}},35480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`/Users/rickbot/.openclaw/workspace/recon-portal/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,683],()=>a(40774));module.exports=r})();